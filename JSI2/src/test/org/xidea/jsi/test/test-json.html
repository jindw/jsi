<meta http-equiv="Content-Type" content="text/html;utf-8"/>
<script>
/*
 * @author 金大为
 * @from JSON.org(http://www.json.org/)
 * @version $Id: event-util.js,v 1.5 2008/02/25 01:55:59 jindw Exp $
 */
alert("金大偉")
/**
 * @public
 * @param data
 * @return JSON
 */
var JSON = {
    /**
     * 解析JSON文本
     * @public 解析
     * @owner JSON
     */
    parse : function(data){
        return window.eval("("+data+")")
    },
    /**
     * 以JSON格式，系列化javascript对象
     * @public
     * @owner JSON
     * @param <Object> value
     * @return <String> json 表达式
     */
    serialize : serialize
}
/**
 * IE 好像容易出问题，可能是线程不安全导致。
 * @internal
 */
var stringRegexp = /["\\\x00-\x1f\x7f-\x9f]/g;
/**
 * 转义替换字符
 * @internal
 */
var charMap = {
    '\b': '\\b',
    '\t': '\\t',
    '\n': '\\n',
    '\f': '\\f',
    '\r': '\\r',
    '"' : '\\"',
    '\\': '\\\\'
};
/**
 * 转义替换函数
 * @internal
 */
function charReplacer(item) {
    var c = charMap[item];
    if (c) {
        return c;
    }
    c = item.charCodeAt().toString(16);
    return '\\u00' + (c.length>1?c:'0'+c);
}
/**
 * JSON 串行化实现
 * @internal
 */
function serialize(value) {
    switch (typeof value) {
        case 'string':
            return '"' + (stringRegexp.test(value) ?
                            value.replace(stringRegexp,charReplacer) :
                            value)
                       + '"';
        case 'object':
            if (!value) {
                return 'null';
            }
            var buf = [];
            if (value instanceof Array) {
                var i = value.length;
                while (i--) {
                    buf[i] = serialize(value[i]) || 'null';
                }
                return '[' + buf.join(',') + ']';
            }
            for (var k in value) {
                var v = serialize(value[k]);
                if (v) {
                    buf.push(serialize(k) + ':' + v);
                }
            }
            return '{' + buf.join(',') + '}';
        case 'number':
            if(!isFinite(value)){
                value = 'null';
            }
        default:
            return String(value);
    }
}
</script>
<script>
var data = [[6,"content"]," ",[6,"random","Math.random().toString(32).substr(2)"]," <table> <tr> <td>显示网站或者网页个数：</td> <td> <input type=\"radio\" name=\"count\" value=\"10\"",[1,"checked","config.count==10?'true':null"]," id=\"",[0,"random"],"_count_10\"></input> <label for=\"",[0,"random"],"_count_10\">10个</label> <input type=\"radio\" name=\"count\" value=\"15\"",[1,"checked","config.count==15?'true':null"]," id=\"",[0,"random"],"_count_15\"></input> <label for=\"",[0,"random"],"_count_15\">15个</label> <input type=\"radio\" name=\"count\" value=\"20\"",[1,"checked","config.count==20?'true':null"]," id=\"",[0,"random"],"_count_20\"></input> <label for=\"",[0,"random"],"_count_20\">20个</label> </td> </tr> <tr> <td>网页历史统计天数：</td> <td> <input type=\"radio\" name=\"day\" value=\"7\"",[1,"checked","config.day==7?'true':null"]," id=\"",[0,"random"],"_day_7\"></input> <label for=\"",[0,"random"],"_day_7\">7天</label> <input type=\"radio\" name=\"day\" value=\"14\"",[1,"checked","config.day==14?'true':null"]," id=\"",[0,"random"],"_day_14\"></input> <label for=\"",[0,"random"],"_day_14\">14天</label> <input type=\"radio\" name=\"day\" value=\"30\"",[1,"checked","config.day==30?'true':null"]," id=\"",[0,"random"],"_day_30\"></input> <label for=\"",[0,"random"],"_day_30\">30天</label> </td> </tr> <tr> <td>默认标签：</td> <td> <input type=\"radio\" name=\"selectedTab\" value=\"0\"",
[1,"checked","config.selectedTab==0?'true':null"]," id=\"",[0,"random"],"_tab_0\"></input> <label for=\"",
[0,"random"],"_tab_0\">网页</label> <input type=\"radio\" name=\"selectedTab\" value=\"1\"",[1,"checked","config.selectedTab==1?'true':null"]," id=\"",[0,"random"],
"_tab_1\"></input> <label for=\"",[0,"random"],
"_tab_1\">网站</label> </td> </tr> </table> ",[],"<form onsubmit=\"return false\"> ",[0,"content",true],
" <div style=\"margin-top:10px;\"> <button",[1,"onclick","action.ok()"],
">确定</button> <button",
[1,"onclick","action.cancel()"],">取消</button> <button",
[1,"onclick","action.restore()"],
">恢复默认设置</button> </div> </form>"];


var text = "x".replace(/\w/g,function(){
return "return function(){a = "+serialize(data)+"\n}"
})
alert(text)
alert(new Function(text))
</script>