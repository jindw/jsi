<html>
    <head>
        <title>Test Suite</title>
    </head>
    <script src="../../../../boot.js"></script>
    <body topmargin="0" bottommargin="0">
    <div id="loading">Loading.....<div>
    <script>
        var parameterMap = {};
        var query = window.location.search;
        var params = query.substr(1).split('&');
        for(var i=0;i<params.length;i++){
            var kv = params[i].split('=');
            parameterMap[decodeURIComponent(kv[0])] = decodeURIComponent(kv[1]);
        }
        var target = {};
        var suite = parent.LoadSuite[parameterMap.id];
        var path = parameterMap.path;
        var type = parameterMap.type;
        var lazy;
        //继续处理
        function next(e){
            suite.nextTest(path,type,target,e);
        }
        try{
	        switch(type){
	        case 'L'://'lazy':
	            $import(path,target,true);
	            lazy = true;
	            break;
	        case 'A'://'asynchronous':
	            $import(path,target,function(){next()});
	            break;
	        case 'S'://'synchronous':
	            $import(path,target,false);
	            next();
	            break;
	        }
        }catch(e){
            next(e);
        }
    </script>
    <script>
        if(lazy){
            next();
        }
    </script>
    </body>
</html>
